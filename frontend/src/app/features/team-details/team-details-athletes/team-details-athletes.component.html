<!-- Spinner de carga -->
<div *ngIf="isLoading" class="loading-spinner">
  <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
</div>

<!-- Agrupamos por rol -->
<ng-container *ngIf="!isLoading">

  <!-- Porteros -->
  <section *ngIf="hasAthletesWithPosition('Arquero')">
    <h3 class="role-title">Porteros</h3>
    <div class="athletes-grid">
      <ng-container *ngFor="let a of athletes">
        <mat-card
          *ngIf="a.position?.displayName === 'Arquero'"
          class="athlete-card"
          (click)="goToAthlete(a.id)"
        >
          <mat-card-header>
            <div mat-card-avatar class="athlete-avatar">
              <img
                *ngIf="a.flag?.href"
                [src]="a.flag.href"
                [alt]="a.flag.alt"
              />
              <mat-icon *ngIf="!a.flag?.href">person</mat-icon>
            </div>
            <mat-card-title class="athlete-name">
              {{ a.fullName }}
            </mat-card-title>
            <mat-card-subtitle class="athlete-position">
              {{ a.position.displayName }}
            </mat-card-subtitle>
          </mat-card-header>
        </mat-card>
      </ng-container>
    </div>
  </section>

  <!-- Defensas -->
  <section *ngIf="hasAthletesWithPosition('Defensor')">
    <h3 class="role-title">Defensores</h3>
    <div class="athletes-grid">
      <ng-container *ngFor="let a of athletes">
        <mat-card
          *ngIf="a.position?.displayName === 'Defensor'"
          class="athlete-card"
          (click)="goToAthlete(a.id)"
        >
          <mat-card-header>
            <div mat-card-avatar class="athlete-avatar">
              <img
                *ngIf="a.flag?.href"
                [src]="a.flag.href"
                [alt]="a.flag.alt"
              />
              <mat-icon *ngIf="!a.flag?.href">person</mat-icon>
            </div>
            <mat-card-title class="athlete-name">
              {{ a.fullName }}
            </mat-card-title>
            <mat-card-subtitle class="athlete-position">
              {{ a.position.displayName }}
            </mat-card-subtitle>
          </mat-card-header>
        </mat-card>
      </ng-container>
    </div>
  </section>
  <!-- Mediocampistas -->
  <section *ngIf="hasAthletesWithPosition('Mediocampista')">
    <h3 class="role-title">Mediocampistas</h3>
    <div class="athletes-grid">
      <ng-container *ngFor="let a of athletes">
        <mat-card
          *ngIf="a.position?.displayName === 'Mediocampista'"
          class="athlete-card"
          (click)="goToAthlete(a.id)"
        >
          <mat-card-header>
            <div mat-card-avatar class="athlete-avatar">
              <img
                *ngIf="a.flag?.href"
                [src]="a.flag.href"
                [alt]="a.flag.alt"
              />
              <mat-icon *ngIf="!a.flag?.href">person</mat-icon>
            </div>
            <mat-card-title class="athlete-name">
              {{ a.fullName }}
            </mat-card-title>
            <mat-card-subtitle class="athlete-position">
              {{ a.position.displayName }}
            </mat-card-subtitle>
          </mat-card-header>
        </mat-card>
      </ng-container>
    </div>
  </section>
  <!-- Delanteros -->
  <section *ngIf="hasAthletesWithPosition('Atacante')">
    <h3 class="role-title">Delanteros</h3>
    <div class="athletes-grid">      
      <ng-container *ngFor="let a of athletes">
        <mat-card
          *ngIf="a.position?.displayName === 'Atacante'"
          class="athlete-card"
          (click)="goToAthlete(a.id)"
        >
          <mat-card-header>
            <div mat-card-avatar class="athlete-avatar">
              <img
                *ngIf="a.flag?.href"
                [src]="a.flag.href"
                [alt]="a.flag.alt"
              />
              <mat-icon *ngIf="!a.flag?.href">person</mat-icon>
            </div>
            <mat-card-title class="athlete-name">
              {{ a.fullName }}
            </mat-card-title>
            <mat-card-subtitle class="athlete-position">
              {{ a.position.displayName }}
            </mat-card-subtitle>
          </mat-card-header>
        </mat-card>
      </ng-container>
    </div>
  </section>
  <!-- Sin datos -->
  <div *ngIf="!athletes.length" class="no-data">
  </div>
</ng-container>



  
