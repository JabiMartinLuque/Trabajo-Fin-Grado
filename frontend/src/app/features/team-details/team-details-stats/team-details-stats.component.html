<mat-card class="team-stats-general-card m-4">

  <mat-card-content>

    <!-- Loading -->
    <div *ngIf="isLoading" class="loading-container">
      <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
    </div>

    <!-- Error -->
    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>

    <!-- Tabla de stats generales -->
    <div *ngIf="!isLoading && selectedSplit" class="table-wrapper">
      <ng-container *ngFor="let cat of selectedSplit.categories">
        <ng-container *ngIf="cat.displayName === 'General'">
          <h2 class="section-title">Estadísticas Generales</h2>
          <table mat-table [dataSource]="getOrderedStats(getAllowedStats(cat.stats))" class="mat-elevation-z1">
          
            <!-- Nombre de la estadística -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef> Estadística </th>
              <td mat-cell *matCellDef="let s"> {{ s.displayName }} </td>
            </ng-container>
            
            <!-- Valor de la estadística -->
            <ng-container matColumnDef="value">
              <th mat-header-cell *matHeaderCellDef> Valor </th>
              <td mat-cell *matCellDef="let s"> {{ s.displayValue }} </td>
            </ng-container>
            
            <tr mat-header-row *matHeaderRowDef="['name','value']"></tr>
            <tr mat-row *matRowDef="let row; columns: ['name','value'];"></tr>
          </table>
        </ng-container>
      </ng-container>

      <ng-container *ngFor="let cat of selectedSplit.categories">
        <ng-container *ngIf="cat.displayName === 'Ofensiva'">
          <h2 class="section-title">Estadísticas de Ataque</h2>
          <table mat-table [dataSource]="getOrderedAttackStats(getAllowedAttackStats(cat.stats))" class="mat-elevation-z1">
          
            <!-- Nombre de la estadística -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef> Estadística </th>
              <td mat-cell *matCellDef="let s"> {{ s.displayName }} </td>
            </ng-container>
            
            <!-- Valor de la estadística -->
            <ng-container matColumnDef="value">
              <th mat-header-cell *matHeaderCellDef> Valor </th>
              <td mat-cell *matCellDef="let s"> {{ s.displayValue }} </td>
            </ng-container>
            
            <tr mat-header-row *matHeaderRowDef="['name','value']"></tr>
            <tr mat-row *matRowDef="let row; columns: ['name','value'];"></tr>
          </table>
        </ng-container>
      </ng-container>

      <ng-container *ngFor="let cat of selectedSplit.categories">
        <ng-container *ngIf="cat.displayName === 'Defensiva'">
          <h2 class="section-title">Estadísticas Defensivas</h2>
          <table mat-table [dataSource]="getOrderedDefensiveStats(getAllowedDefensiveStats(cat.stats))" class="mat-elevation-z1">
          
            <!-- Nombre de la estadística -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef> Estadística </th>
              <td mat-cell *matCellDef="let s"> {{ s.displayName }} </td>
            </ng-container>
            
            <!-- Valor de la estadística -->
            <ng-container matColumnDef="value">
              <th mat-header-cell *matHeaderCellDef> Valor </th>
              <td mat-cell *matCellDef="let s"> {{ s.displayValue }} </td>
            </ng-container>
            
            <tr mat-header-row *matHeaderRowDef="['name','value']"></tr>
            <tr mat-row *matRowDef="let row; columns: ['name','value'];"></tr>
          </table>
        </ng-container>
      </ng-container>
    </div>

    <!-- Sin datos -->
    <div *ngIf="!isLoading && (!selectedSplit || !selectedSplit.categories?.length)" class="no-data">
      No hay estadísticas generales disponibles.
    </div>

  </mat-card-content>
</mat-card>




