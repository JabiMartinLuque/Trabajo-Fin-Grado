<!-- ===== APP BAR / NAVBAR ================================================= -->
<mat-toolbar class="app-toolbar" color="primary">

  <!-- hamburguesa para móvil -->
  <button
    mat-icon-button
    class="app-burger"
    (click)="drawer.toggle()"
    aria-label="Open menu"
  >
    <mat-icon>menu</mat-icon>
  </button>

  <!-- logo / marca -->
  <span class="app-brand" routerLink="/">
    <mat-icon>home</mat-icon>
  </span>

  <span class="spacer"></span>   <!-- empuja el nav a la derecha -->

  <!-- ===== LINKS DESKTOP ================================================ -->
  <nav class="app-nav">

    <!-- Leagues -->
    <button mat-button [matMenuTriggerFor]="leagues">Leagues</button>
    <mat-menu #leagues="matMenu">
      <button mat-menu-item routerLink="/league/esp.1">Spain (LaLiga)</button>
      <button mat-menu-item routerLink="/league/eng.1">England (PL)</button>
      <button mat-menu-item routerLink="/league/fra.1">France (Ligue 1)</button>
      <button mat-menu-item routerLink="/league/ger.1">Germany (Bundesliga)</button>
      <button mat-menu-item routerLink="/league/ita.1">Italy (Serie A)</button>
    </mat-menu>

    <a mat-button routerLink="/login"    routerLinkActive="active">Login</a>
    <a mat-button routerLink="/register" routerLinkActive="active">Register</a>

    <!-- Transactions -->
    <button mat-button [matMenuTriggerFor]="tx">Transactions</button>
    <mat-menu #tx="matMenu">
      <button mat-menu-item routerLink="/transactions/esp.1">Spain (LaLiga)</button>
      <button mat-menu-item routerLink="/transactions/eng.1">England (PL)</button>
      <button mat-menu-item routerLink="/transactions/fra.1">France (Ligue 1)</button>
      <button mat-menu-item routerLink="/transactions/ger.1">Germany (Bundesliga)</button>
      <button mat-menu-item routerLink="/transactions/ita.1">Italy (Serie A)</button>
    </mat-menu>

    <!-- Reemplaza el enlace al perfil -->
    <a mat-button routerLink="/profile" routerLinkActive="active">
      <span class="profile-icon-wrapper">
        <img *ngIf="user?.profileImageUrl; else defaultIcon" [src]="user?.profileImageUrl" alt="Imagen de perfil" class="profile-avatar-icon"/>
      </span>
    </a>
    <ng-template #defaultIcon>
      <mat-icon>person</mat-icon>
    </ng-template>
  </nav>
</mat-toolbar>

<!-- ===== SIDENAV PARA MÓVIL =========================================== -->
<mat-sidenav-container class="app-sidenav-container">
  <mat-sidenav #drawer class="app-sidenav" mode="over">
    <mat-nav-list>

      <a mat-list-item routerLink="/home" (click)="drawer.close()">Home</a>

      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Leagues</mat-panel-title>
        </mat-expansion-panel-header>
        <a mat-list-item routerLink="/league/esp.1" (click)="drawer.close()">Spain (LaLiga)</a>
        <a mat-list-item routerLink="/league/eng.1" (click)="drawer.close()">England (PL)</a>
        <a mat-list-item routerLink="/league/fra.1" (click)="drawer.close()">France (Ligue 1)</a>
        <a mat-list-item routerLink="/league/ger.1" (click)="drawer.close()">Germany (Bundesliga)</a>
        <a mat-list-item routerLink="/league/ita.1" (click)="drawer.close()">Italy (Serie A)</a>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Transactions</mat-panel-title>
        </mat-expansion-panel-header>
        <a mat-list-item routerLink="/transactions/esp.1" (click)="drawer.close()">Spain (LaLiga)</a>
        <a mat-list-item routerLink="/transactions/eng.1" (click)="drawer.close()">England (PL)</a>
        <a mat-list-item routerLink="/transactions/fra.1" (click)="drawer.close()">France (Ligue 1)</a>
        <a mat-list-item routerLink="/transactions/ger.1" (click)="drawer.close()">Germany (Bundesliga)</a>
        <a mat-list-item routerLink="/transactions/ita.1" (click)="drawer.close()">Italy (Serie A)</a>
      </mat-expansion-panel>
      <a mat-list-item routerLink="/login"    (click)="drawer.close()">Login</a>
      <a mat-list-item routerLink="/register" (click)="drawer.close()">Register</a>      
      <a mat-list-item routerLink="/profile"   (click)="drawer.close()">Profile</a>
    </mat-nav-list>
  </mat-sidenav>

  <!-- Vistas de la aplicación -->
  <router-outlet></router-outlet>
</mat-sidenav-container>


